<%- include('../partials/html-head') %>
<%- include('../partials/nav') %>
<table>
  <tr>
    <th colspan="2">House Details</th>
</tr>
<tr>
  <td>Price</td>
  <td><%= house.price %></td>
</tr>
<tr>
  <td>Type</td>
  <td><%= house.propertyType %></td>
</tr>
<tr>
  <td>Number of bedrooms</td>
  <td><%= house.bedrooms %></td>
</tr>
<tr>
  <td>Number of bathrooms</td>
  <td><%= house.bathrooms %></td>
</tr>
</tr>
<tr>
  <td>Size</td>
  <td><%= house.size %></td>
</tr>
<tr>
  <td>Built year</td>
  <td><%= house.builtYear %></td>
</tr>
<tr>
  <td>Visted</td>
  <td><%= house.visited %></td>
</tr>
</table>


<h2>Reviews</h2>

<% if (house.reviews.length) { %>
  <table>
    <thead>
      <tr>
        <th>Date</th>
        <th>Review</th>
        <th>Rating</th>
      </tr>
    </thead>
    <% house.reviews.forEach(review =>  { %>
      <% if (review.reviewer.equals(user?._id)) { %>
      <tbody>
          <td><%= review.createdAt.toLocaleDateString() %></td>
          <td><%= review.notes %></td>
          <td><%= review.rating %></td>
    </tbody>
      <% } %>
    <% }) %>
  </table>
  <% } %>
<br>
<table>
  <form id="add-review-form" action="/houses/<%= house.id %>/reviews" method="POST">
<tr>
    <th colspan="2">Add Review</th>
</tr>
<tr>
  <td>Notes</td>
  <td> <textarea name="notes" id="content-textarea"></textarea></td>
</tr>
<tr>
  <td>Rating </td>
  <td><select name="rating" id="rating-select">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5" selected>5</option>
  </select>
  </td>
</tr>
<tr>
  <th class="form-button" colspan="2"><button type="submit">Add</button></th>
</tr>

</form>
</table>

<%- include('../partials/footer') %>